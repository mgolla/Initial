angular.module("ngMap",[]),function(){"use strict";var n,t=function(t,i,r,u,f,e,o){var s;n=f;s=this;s.mapOptions;s.mapEvents;s.addObject=function(n,t){if(s.map){s.map[n]=s.map[n]||{};var i=Object.keys(s.map[n]).length;s.map[n][t.id||i]=t;s.map instanceof google.maps.Map&&("infoWindows"!=n&&t.setMap&&t.setMap&&t.setMap(s.map),t.centered&&t.position&&s.map.setCenter(t.position),"markers"==n&&s.objectChanged("markers"),"customMarkers"==n&&s.objectChanged("customMarkers"))}};s.deleteObject=function(n,t){var i,r;if(t.map){i=t.map[n];for(r in i)i[r]===t&&(google.maps.event.clearInstanceListeners(t),delete i[r]);t.map&&t.setMap&&t.setMap(null);"markers"==n&&s.objectChanged("markers");"customMarkers"==n&&s.objectChanged("customMarkers")}};s.observeAttrSetObj=function(t,i,r){var f,u,o;if(i.noWatcher)return!1;for(f=n.getAttrsToObserve(t),u=0;u<f.length;u++)o=f[u],i.$observe(o,e.observeAndSet(o,r))};s.zoomToIncludeMarkers=function(){var n=new google.maps.LatLngBounds,t,i;for(t in s.map.markers)n.extend(s.map.markers[t].getPosition());for(i in s.map.customMarkers)n.extend(s.map.customMarkers[i].getPosition());s.map.fitBounds(n)};s.objectChanged=function(n){s.map&&("markers"==n||"customMarkers"==n)&&"auto"==s.map.zoomToIncludeMarkers&&s.zoomToIncludeMarkers()};s.initializeMap=function(){var f=s.mapOptions,p=s.mapEvents,l=s.map,v,h,b,c,k,y;if(s.map=o.getMapInstance(i[0]),e.setStyle(i[0]),l){var w=n.filter(r),d=n.getOptions(w),g=n.getControlOptions(w);f=angular.extend(d,g);for(v in l)if(h=l[v],"object"==typeof h)for(b in h)s.addObject(v,h[b]);s.map.showInfoWindow=s.showInfoWindow;s.map.hideInfoWindow=s.hideInfoWindow}f.zoom=f.zoom||15;c=f.center;!f.center||"string"==typeof c&&c.match(/\{\{.*\}\}/)?f.center=new google.maps.LatLng(0,0):c instanceof google.maps.LatLng||(k=f.center,delete f.center,e.getGeoLocation(k,f.geoLocationOptions).then(function(n){s.map.setCenter(n);var i=f.geoCallback;i&&u(i)(t)},function(){f.geoFallbackCenter&&s.map.setCenter(f.geoFallbackCenter)}));s.map.setOptions(f);for(y in p)google.maps.event.addListener(s.map,y,p[y]);s.observeAttrSetObj(a,r,s.map);s.singleInfoWindow=f.singleInfoWindow;google.maps.event.trigger(s.map,"resize");google.maps.event.addListenerOnce(s.map,"idle",function(){e.addMap(s);f.zoomToIncludeMarkers&&s.zoomToIncludeMarkers();t.map=s.map;t.$emit("mapInitialized",s.map);r.mapInitialized&&u(r.mapInitialized)(t,{map:s.map})})};t.google=google;var a=n.orgAttributes(i),h=n.filter(r),c=n.getOptions(h,{scope:t}),v=n.getControlOptions(h),y=angular.extend(c,v),l=n.getEvents(t,h);Object.keys(l).length&&void 0;s.mapOptions=y;s.mapEvents=l;c.lazyInit?(s.map={id:r.id},e.addMap(s)):s.initializeMap();c.triggerResize&&google.maps.event.trigger(s.map,"resize");i.bind("$destroy",function(){o.returnMapInstance(s.map);e.deleteMap(s)})};t.$inject=["$scope","$element","$attrs","$parse","Attr2MapOptions","NgMap","NgMapPool"];angular.module("ngMap").controller("__MapController",t)}(),function(){"use strict";var n,i=function(t,i,u,f){f=f[0]||f[1];var s=n.orgAttributes(i),o=n.filter(u),h=n.getOptions(o,{scope:t}),c=n.getEvents(t,o),e=r(h,c);f.addObject("bicyclingLayers",e);f.observeAttrSetObj(s,u,e);i.bind("$destroy",function(){f.deleteObject("bicyclingLayers",e)})},r=function(n,t){var i=new google.maps.BicyclingLayer(n);for(var r in t)google.maps.event.addListener(i,r,t[r]);return i},t=function(t){return n=t,{restrict:"E",require:["?^map","?^ngMap"],link:i}};t.$inject=["Attr2MapOptions"];angular.module("ngMap").directive("bicyclingLayer",t)}(),function(){"use strict";var n,t,r,u=function(i,r,u,f){var o,c;f=f[0]||f[1];var s=n.filter(u),l=n.getOptions(s,{scope:i}),h=n.getEvents(i,s),e=r[0].parentElement.removeChild(r[0]);t(e.innerHTML.trim())(i);for(o in h)google.maps.event.addDomListener(e,o,h[o]);f.addObject("customControls",e);c=l.position;f.map.controls[google.maps.ControlPosition[c]].push(e);r.bind("$destroy",function(){f.deleteObject("customControls",e)})},i=function(i,f,e){return n=i,t=f,r=e,{restrict:"E",require:["?^map","?^ngMap"],link:u}};i.$inject=["Attr2MapOptions","$compile","NgMap"];angular.module("ngMap").directive("customControl",i)}(),function(){"use strict";var t,i,r,u,n=function(n){n=n||{};this.el=document.createElement("div");this.el.style.display="inline-block";this.el.style.visibility="hidden";this.visible=!0;for(var t in n)this[t]=n[t]},e=function(){n.prototype=new google.maps.OverlayView;n.prototype.setContent=function(n,t){this.el.innerHTML=n;this.el.style.position="absolute";t&&r(angular.element(this.el).contents())(t)};n.prototype.getDraggable=function(){return this.draggable};n.prototype.setDraggable=function(n){this.draggable=n};n.prototype.getPosition=function(){return this.position};n.prototype.setPosition=function(n){if(n&&(this.position=n),this.getProjection()&&"function"==typeof this.position.lng){var r=this.getProjection().fromLatLngToDivPixel(this.position),t=this,u=function(){var n=Math.round(r.x-t.el.offsetWidth/2),i=Math.round(r.y-t.el.offsetHeight-10);t.el.style.left=n+"px";t.el.style.top=i+"px";t.el.style.visibility="visible"};t.el.offsetWidth&&t.el.offsetHeight?u():i(u,300)}};n.prototype.setZIndex=function(n){n&&(this.zIndex=n);this.el.style.zIndex=this.zIndex};n.prototype.setVisible=function(n){this.el.style.display=n?"inline-block":"none";this.visible=n};n.prototype.addClass=function(n){var t=this.el.className.trim().split(" ");-1==t.indexOf(n)&&t.push(n);this.el.className=t.join(" ")};n.prototype.removeClass=function(n){var t=this.el.className.split(" "),i=t.indexOf(n);i>-1&&t.splice(i,1);this.el.className=t.join(" ")};n.prototype.onAdd=function(){this.getPanes().overlayMouseTarget.appendChild(this.el)};n.prototype.draw=function(){this.setPosition();this.setZIndex(this.zIndex);this.setVisible(this.visible)};n.prototype.onRemove=function(){this.el.parentNode.removeChild(this.el)}},o=function(i,r){return function(f,e,o,s){var h,y,l;s=s[0]||s[1];var p=t.orgAttributes(e),a=t.filter(o),c=t.getOptions(a,{scope:f}),v=t.getEvents(f,a);e[0].style.display="none";h=new n(c);f.$watch("["+r.join(",")+"]",function(){h.setContent(i,f)});h.setContent(e[0].innerHTML,f);y=e[0].firstElementChild.className;h.addClass("custom-marker");h.addClass(y);c.position instanceof google.maps.LatLng||u.getGeoLocation(c.position).then(function(n){h.setPosition(n)});for(l in v)google.maps.event.addDomListener(h.el,l,v[l]);s.addObject("customMarkers",h);s.observeAttrSetObj(p,o,h);e.bind("$destroy",function(){s.deleteObject("customMarkers",h)})}},f=function(n,f,s,h){return t=s,i=n,r=f,u=h,{restrict:"E",require:["?^map","?^ngMap"],compile:function(n){e();n[0].style.display="none";var i=n.html(),r=i.match(/{{([^}]+)}}/g),t=[];return(r||[]).forEach(function(n){var i=n.replace("{{","").replace("}}","");-1==n.indexOf("::")&&-1==n.indexOf("this.")&&-1==t.indexOf(i)&&t.push(n.replace("{{","").replace("}}",""))}),o(i,t)}}};f.$inject=["$timeout","$compile","Attr2MapOptions","NgMap"];angular.module("ngMap").directive("customMarker",f)}(),function(){"use strict";var i,n,t,f=function(n,t){var i,r;n.panel&&(n.panel=document.getElementById(n.panel)||document.querySelector(n.panel));i=new google.maps.DirectionsRenderer(n);for(r in t)google.maps.event.addListener(i,r,t[r]);return i},r=function(i,r){var s=new google.maps.DirectionsService,u=r,o,e,f;u.travelMode=u.travelMode||"DRIVING";o=["origin","destination","travelMode","transitOptions","unitSystem","durationInTraffic","waypoints","optimizeWaypoints","provideRouteAlternatives","avoidHighways","avoidTolls","region"];for(e in u)-1===o.indexOf(e)&&delete u[e];u.waypoints&&("[]"==u.waypoints||""===u.waypoints)&&delete u.waypoints;f=function(t){s.route(t,function(t,r){r==google.maps.DirectionsStatus.OK&&n(function(){i.setDirections(t)})})};u.origin&&u.destination&&("current-location"==u.origin?t.getCurrentPosition().then(function(n){u.origin=new google.maps.LatLng(n.coords.latitude,n.coords.longitude);f(u)}):"current-location"==u.destination?t.getCurrentPosition().then(function(n){u.destination=new google.maps.LatLng(n.coords.latitude,n.coords.longitude);f(u)}):f(u))},u=function(u,e,o,s){var h=u,c;return i=s,n=e,t=o,c=function(t,u,e,o){o=o[0]||o[1];var a=h.orgAttributes(u),l=h.filter(e),s=h.getOptions(l,{scope:t}),v=h.getEvents(t,l),y=h.getAttrsToObserve(a),c=f(s,v);o.addObject("directionsRenderers",c);y.forEach(function(t){!function(t){e.$observe(t,function(i){if("panel"==t)n(function(){var n=document.getElementById(i)||document.querySelector(i);n&&c.setPanel(n)});else if(s[t]!==i){var u=h.toOptionValue(i,{key:t});s[t]=u;r(c,s)}})}(t)});i.getMap().then(function(){r(c,s)});u.bind("$destroy",function(){o.deleteObject("directionsRenderers",c)})},{restrict:"E",require:["?^map","?^ngMap"],link:c}};u.$inject=["Attr2MapOptions","$timeout","NavigatorGeolocation","NgMap"];angular.module("ngMap").directive("directions",u)}(),function(){"use strict";angular.module("ngMap").directive("drawingManager",["Attr2MapOptions",function(n){var t=n;return{restrict:"E",require:["?^map","?^ngMap"],link:function(n,i,r,u){var s;u=u[0]||u[1];var o=t.filter(r),f=t.getOptions(o,{scope:n}),c=t.getControlOptions(o),h=t.getEvents(n,o),e=new google.maps.drawing.DrawingManager({drawingMode:f.drawingmode,drawingControl:f.drawingcontrol,drawingControlOptions:c.drawingControlOptions,circleOptions:f.circleoptions,markerOptions:f.markeroptions,polygonOptions:f.polygonoptions,polylineOptions:f.polylineoptions,rectangleOptions:f.rectangleoptions});r.$observe("drawingControlOptions",function(n){e.drawingControlOptions=t.getControlOptions({drawingControlOptions:n}).drawingControlOptions;e.setDrawingMode(null);e.setMap(u.map)});for(s in h)google.maps.event.addListener(e,s,h[s]);u.addObject("mapDrawingManager",e);i.bind("$destroy",function(){u.deleteObject("mapDrawingManager",e)})}}}])}(),function(){"use strict";angular.module("ngMap").directive("dynamicMapsEngineLayer",["Attr2MapOptions",function(n){var t=n,i=function(n,t){var i=new google.maps.visualization.DynamicMapsEngineLayer(n);for(var r in t)google.maps.event.addListener(i,r,t[r]);return i};return{restrict:"E",require:["?^map","?^ngMap"],link:function(n,r,u,f){f=f[0]||f[1];var e=t.filter(u),s=t.getOptions(e,{scope:n}),o=t.getEvents(n,e,o),h=i(s,o);f.addObject("mapsEngineLayers",h)}}}])}(),function(){"use strict";angular.module("ngMap").directive("fusionTablesLayer",["Attr2MapOptions",function(n){var t=n,i=function(n,t){var i=new google.maps.FusionTablesLayer(n);for(var r in t)google.maps.event.addListener(i,r,t[r]);return i};return{restrict:"E",require:["?^map","?^ngMap"],link:function(n,r,u,f){f=f[0]||f[1];var e=t.filter(u),s=t.getOptions(e,{scope:n}),o=t.getEvents(n,e,o),h=i(s,o);f.addObject("fusionTablesLayers",h)}}}])}(),function(){"use strict";angular.module("ngMap").directive("heatmapLayer",["Attr2MapOptions","$window",function(n,t){var i=n;return{restrict:"E",require:["?^map","?^ngMap"],link:function(n,r,u,f){var o,e,s;if(f=f[0]||f[1],o=i.filter(u),e=i.getOptions(o,{scope:n}),e.data=t[u.data]||n[u.data],!(e.data instanceof Array))throw"invalid heatmap data";e.data=new google.maps.MVCArray(e.data);s=new google.maps.visualization.HeatmapLayer(e);i.getEvents(n,o);f.addObject("heatmapLayers",s)}}}])}(),function(){"use strict";var n=function(n,t,i,r,u){var f=n,e=function(n,r,u){var f,e,o;!n.position||n.position instanceof google.maps.LatLng||delete n.position;f=new google.maps.InfoWindow(n);for(e in r)e&&google.maps.event.addListener(f,e,r[e]);if(o=u.html().trim(),1!=angular.element(o).length)throw"info-window working as a template must have a container";return f.__template=o.replace(/\s?ng-non-bindable[='"]+/,""),f.__open=function(n,r,u){i(function(){var i,e;u&&(r.anchor=u);i=t(f.__template)(r);f.setContent(i[0]);r.$apply();u&&u.getPosition?f.open(n,u):u&&u instanceof google.maps.LatLng?(f.open(n),f.setPosition(u)):f.open(n);e=f.content.parentElement.parentElement.parentElement;e.className="ng-map-info-window"})},f},o=function(n,t,i,o){var s;o=o[0]||o[1];t.css("display","none");var c,a=f.orgAttributes(t),l=f.filter(i),h=f.getOptions(l,{scope:n}),v=f.getEvents(n,l);!h.position||h.position instanceof google.maps.LatLng||(c=h.position);s=e(h,v,t);c&&u.getGeoLocation(c).then(function(t){s.setPosition(t);s.__open(o.map,n,t);var u=i.geoCallback;u&&r(u)(n)});o.addObject("infoWindows",s);o.observeAttrSetObj(a,i,s);o.showInfoWindow=o.map.showInfoWindow=o.showInfoWindow||function(t,i,r){var f="string"==typeof t?t:i,u="string"==typeof t?i:r,e,s;if("string"==typeof u)if("undefined"!=typeof o.map.markers&&"undefined"!=typeof o.map.markers[u])u=o.map.markers[u];else{if("undefined"==typeof o.map.customMarkers[u])throw new Error("Cant open info window for id "+u+". Marker or CustomMarker is not defined");u=o.map.customMarkers[u]}e=o.map.infoWindows[f];s=u?u:this.getPosition?this:null;e.__open(o.map,n,s);o.singleInfoWindow&&(o.lastInfoWindow&&n.hideInfoWindow(o.lastInfoWindow),o.lastInfoWindow=f)};o.hideInfoWindow=o.map.hideInfoWindow=o.hideInfoWindow||function(n,t){var i="string"==typeof n?n:t,r=o.map.infoWindows[i];r.close()};n.showInfoWindow=o.map.showInfoWindow;n.hideInfoWindow=o.map.hideInfoWindow;u.getMap().then(function(t){if(s.visible&&s.__open(t,n),s.visibleOnMarker){var i=s.visibleOnMarker;s.__open(t,n,t.markers[i])}})};return{restrict:"E",require:["?^map","?^ngMap"],link:o}};n.$inject=["Attr2MapOptions","$compile","$timeout","$parse","NgMap"];angular.module("ngMap").directive("infoWindow",n)}(),function(){"use strict";angular.module("ngMap").directive("kmlLayer",["Attr2MapOptions",function(n){var t=n,i=function(n,t){var i=new google.maps.KmlLayer(n);for(var r in t)google.maps.event.addListener(i,r,t[r]);return i};return{restrict:"E",require:["?^map","?^ngMap"],link:function(n,r,u,f){f=f[0]||f[1];var s=t.orgAttributes(r),o=t.filter(u),h=t.getOptions(o,{scope:n}),c=t.getEvents(n,o),e=i(h,c);f.addObject("kmlLayers",e);f.observeAttrSetObj(s,u,e);r.bind("$destroy",function(){f.deleteObject("kmlLayers",e)})}}}])}(),function(){"use strict";angular.module("ngMap").directive("mapData",["Attr2MapOptions","NgMap",function(n,t){var i=n;return{restrict:"E",require:["?^map","?^ngMap"],link:function(n,r,u){var e=i.filter(u),o=i.getOptions(e,{scope:n}),f=i.getEvents(n,e,f);t.getMap().then(function(t){var i,r,u;for(i in o)r=o[i],"function"==typeof n[r]?t.data[i](n[r]):t.data[i](r);for(u in f)t.data.addListener(u,f[u])})}}}])}(),function(){"use strict";var i,n,u,t,f=function(r,u,f){var o=f.mapLazyLoadParams||f.mapLazyLoad,e;(window.lazyLoadCallback=function(){i(function(){u.html(t);n(u.contents())(r)},100)},void 0===window.google||void 0===window.google.maps)?(e=document.createElement("script"),e.src=o+(o.indexOf("?")>-1?"&":"?")+"callback=lazyLoadCallback",document.querySelector('script[src="'+e.src+'"]')||document.body.appendChild(e)):(u.html(t),n(u.contents())(r))},e=function(n,i){return!i.mapLazyLoad&&void 0,t=n.html(),u=i.mapLazyLoad,void 0!==window.google&&void 0!==window.google.maps?!1:(n.html(""),{pre:f})},r=function(t,r){return n=t,i=r,{compile:e}};r.$inject=["$compile","$timeout"];angular.module("ngMap").directive("mapLazyLoad",r)}(),function(){"use strict";angular.module("ngMap").directive("mapType",["$parse","NgMap",function(n,t){return{restrict:"E",require:["?^map","?^ngMap"],link:function(i,r,u,f){f=f[0]||f[1];var e,o=u.name;if(!o)throw"invalid map-type name";if(e=n(u.object)(i),!e)throw"invalid map-type object";t.getMap().then(function(n){n.mapTypes.set(o,e)});f.addObject("mapTypes",e)}}}])}(),function(){"use strict";var n=function(){return{restrict:"AE",controller:"__MapController",conrollerAs:"ngmap"}};angular.module("ngMap").directive("map",[n]);angular.module("ngMap").directive("ngMap",[n])}(),function(){"use strict";angular.module("ngMap").directive("mapsEngineLayer",["Attr2MapOptions",function(n){var t=n,i=function(n,t){var i=new google.maps.visualization.MapsEngineLayer(n);for(var r in t)google.maps.event.addListener(i,r,t[r]);return i};return{restrict:"E",require:["?^map","?^ngMap"],link:function(n,r,u,f){f=f[0]||f[1];var e=t.filter(u),s=t.getOptions(e,{scope:n}),o=t.getEvents(n,e,o),h=i(s,o);f.addObject("mapsEngineLayers",h)}}}])}(),function(){"use strict";var n,i,t,u=function(n,i){var f,r,u;if(t.defaultOptions.marker)for(r in t.defaultOptions.marker)"undefined"==typeof n[r]&&(n[r]=t.defaultOptions.marker[r]);n.position instanceof google.maps.LatLng||(n.position=new google.maps.LatLng(0,0));f=new google.maps.Marker(n);Object.keys(i).length>0;for(u in i)u&&google.maps.event.addListener(f,u,i[u]);return f},f=function(r,f,e,o){var s;o=o[0]||o[1];var c,a=n.orgAttributes(f),l=n.filter(e),h=n.getOptions(l,r,{scope:r}),v=n.getEvents(r,l);h.position instanceof google.maps.LatLng||(c=h.position);s=u(h,v);o.addObject("markers",s);c&&t.getGeoLocation(c).then(function(n){s.setPosition(n);h.centered&&s.map.setCenter(n);var t=e.geoCallback;t&&i(t)(r)});o.observeAttrSetObj(a,e,s);f.bind("$destroy",function(){o.deleteObject("markers",s)})},r=function(r,u,e){return n=r,i=u,t=e,{restrict:"E",require:["^?map","?^ngMap"],link:f}};r.$inject=["Attr2MapOptions","$parse","NgMap"];angular.module("ngMap").directive("marker",r)}(),function(){"use strict";angular.module("ngMap").directive("overlayMapType",["NgMap",function(n){return{restrict:"E",require:["?^map","?^ngMap"],link:function(t,i,r,u){u=u[0]||u[1];var e=r.initMethod||"insertAt",f=t[r.object];n.getMap().then(function(n){if("insertAt"==e){var t=parseInt(r.index,10);n.overlayMapTypes.insertAt(t,f)}else"push"==e&&n.overlayMapTypes.push(f)});u.addObject("overlayMapTypes",f)}}}])}(),function(){"use strict";var n=function(n,t){var i=n,r=function(n,r,u,f){var o,s;if("false"===u.placesAutoComplete)return!1;var h=i.filter(u),l=i.getOptions(h,{scope:n}),c=i.getEvents(n,h),e=new google.maps.places.Autocomplete(r[0],l);for(o in c)google.maps.event.addListener(e,o,c[o]);s=function(){t(function(){f&&f.$setViewValue(r.val())},100)};google.maps.event.addListener(e,"place_changed",s);r[0].addEventListener("change",s);u.$observe("types",function(n){if(n){var t=i.toOptionValue(n,{key:"types"});e.setTypes(t)}})};return{restrict:"A",require:"?ngModel",link:r}};n.$inject=["Attr2MapOptions","$timeout"];angular.module("ngMap").directive("placesAutoComplete",n)}(),function(){"use strict";var t=function(n,t){var i,e=n.name,u,f,r;switch(delete n.name,e){case"circle":n.center instanceof google.maps.LatLng||(n.center=new google.maps.LatLng(0,0));i=new google.maps.Circle(n);break;case"polygon":i=new google.maps.Polygon(n);break;case"polyline":i=new google.maps.Polyline(n);break;case"rectangle":i=new google.maps.Rectangle(n);break;case"groundOverlay":case"image":u=n.url;f={opacity:n.opacity,clickable:n.clickable,id:n.id};i=new google.maps.GroundOverlay(u,n.bounds,f)}for(r in t)t[r]&&google.maps.event.addListener(i,r,t[r]);return i},n=function(n,i,r){var u=n,f=function(n,f,e,o){var s;o=o[0]||o[1];var c,l,v=u.orgAttributes(f),a=u.filter(e),h=u.getOptions(a,{scope:n}),y=u.getEvents(n,a);l=h.name;h.center instanceof google.maps.LatLng||(c=h.center);s=t(h,y);o.addObject("shapes",s);c&&"circle"==l&&r.getGeoLocation(c).then(function(t){s.setCenter(t);s.centered&&s.map.setCenter(t);var r=e.geoCallback;r&&i(r)(n)});o.observeAttrSetObj(v,e,s);f.bind("$destroy",function(){o.deleteObject("shapes",s)})};return{restrict:"E",require:["?^map","?^ngMap"],link:f}};n.$inject=["Attr2MapOptions","$parse","NgMap"];angular.module("ngMap").directive("shape",n)}(),function(){"use strict";var n=function(n,t){var i=n,r=function(n,t,i){var r,u,f;t.container&&(u=document.getElementById(t.container),u=u||document.querySelector(t.container));u?r=new google.maps.StreetViewPanorama(u,t):(r=n.getStreetView(),r.setOptions(t));for(f in i)f&&google.maps.event.addListener(r,f,i[f]);return r},u=function(n,u,f){var e=i.filter(f),o=i.getOptions(e,{scope:n}),s=i.getControlOptions(e),h=angular.extend(o,s),c=i.getEvents(n,e);t.getMap().then(function(n){var t=r(n,h,c),i;n.setStreetView(t);!t.getPosition()&&t.setPosition(n.getCenter());google.maps.event.addListener(t,"position_changed",function(){t.getPosition()!==n.getCenter()&&n.setCenter(t.getPosition())});i=google.maps.event.addListener(n,"center_changed",function(){t.setPosition(n.getCenter());google.maps.event.removeListener(i)})})};return{restrict:"E",require:["?^map","?^ngMap"],link:u}};n.$inject=["Attr2MapOptions","NgMap"];angular.module("ngMap").directive("streetViewPanorama",n)}(),function(){"use strict";angular.module("ngMap").directive("trafficLayer",["Attr2MapOptions",function(n){var t=n,i=function(n,t){var i=new google.maps.TrafficLayer(n);for(var r in t)google.maps.event.addListener(i,r,t[r]);return i};return{restrict:"E",require:["?^map","?^ngMap"],link:function(n,r,u,f){f=f[0]||f[1];var s=t.orgAttributes(r),o=t.filter(u),h=t.getOptions(o,{scope:n}),c=t.getEvents(n,o),e=i(h,c);f.addObject("trafficLayers",e);f.observeAttrSetObj(s,u,e);r.bind("$destroy",function(){f.deleteObject("trafficLayers",e)})}}}])}(),function(){"use strict";angular.module("ngMap").directive("transitLayer",["Attr2MapOptions",function(n){var t=n,i=function(n,t){var i=new google.maps.TransitLayer(n);for(var r in t)google.maps.event.addListener(i,r,t[r]);return i};return{restrict:"E",require:["?^map","?^ngMap"],link:function(n,r,u,f){f=f[0]||f[1];var s=t.orgAttributes(r),o=t.filter(u),h=t.getOptions(o,{scope:n}),c=t.getEvents(n,o),e=i(h,c);f.addObject("transitLayers",e);f.observeAttrSetObj(s,u,e);r.bind("$destroy",function(){f.deleteObject("transitLayers",e)})}}}])}(),function(){"use strict";var n=/([\:\-\_]+(.))/g,t=/^moz([A-Z])/,i=function(){return function(i){return i.replace(n,function(n,t,i,r){return r?i.toUpperCase():i}).replace(t,"Moz$1")}};angular.module("ngMap").filter("camelCase",i)}(),function(){"use strict";var n=function(){return function(n){try{return JSON.parse(n),n}catch(t){return n.replace(/([\$\w]+)\s*:/g,function(n,t){return'"'+t+'":'}).replace(/'([^']+)'/g,function(n,t){return'"'+t+'"'})}}};angular.module("ngMap").filter("jsonize",n)}(),function(){"use strict";var isoDateRE=/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/,n=function(n,t,i,r,u,f,e){var h=function(n){var i,t,r;for(n.length>0&&(n=n[0]),i={},t=0;t<n.attributes.length;t++)r=n.attributes[t],i[r.name]=r.value;return i},c=function(n){return n.match(/^[\+\-]?[0-9\.]+,[ ]*\ ?[\+\-]?[0-9\.]+$/)&&(n="["+n+"]"),JSON.parse(e(n))},l=function(n){var t=n;return n[0].constructor==Array?t=n.map(function(n){return new google.maps.LatLng(n[0],n[1])}):!isNaN(parseFloat(n[0]))&&isFinite(n[0])&&(t=new google.maps.LatLng(t[0],t[1])),t},o=function(input,options){var output,u,exp,matches,capitalizedKey,expr,i,r,n,t;try{output=getNumber(input)}catch(f){try{output=c(input);output instanceof Array?output=output[0].constructor==Object?output:l(output):output===Object(output)&&(u=options,u.doNotConverStringToNumber=!0,output=s(output,u))}catch(e){if(input.match(/^[A-Z][a-zA-Z0-9]+\(.*\)$/))try{exp="new google.maps."+input;output=eval(exp)}catch(o){output=input}else if(input.match(/^([A-Z][a-zA-Z0-9]+)\.([A-Z]+)$/))try{matches=input.match(/^([A-Z][a-zA-Z0-9]+)\.([A-Z]+)$/);output=google.maps[matches[1]][matches[2]]}catch(o){output=input}else if(input.match(/^[A-Z]+$/))try{capitalizedKey=options.key.charAt(0).toUpperCase()+options.key.slice(1);options.key.match(/temperatureUnit|windSpeedUnit|labelColor/)?(capitalizedKey=capitalizedKey.replace(/s$/,""),output=google.maps.weather[capitalizedKey][input]):output=google.maps[capitalizedKey][input]}catch(o){output=input}else if(input.match(isoDateRE))try{output=new Date(input)}catch(o){output=input}else if(input.match(/^{/)&&options.scope)try{expr=input.replace(/{{/,"").replace(/}}/g,"");output=options.scope.$eval(expr)}catch(f){output=input}else output=input}}if(("center"==options.key||"center"==options.key)&&output instanceof Array&&(output=new google.maps.LatLng(output[0],output[1])),"bounds"==options.key&&output instanceof Array&&(output=new google.maps.LatLngBounds(output[0],output[1])),"icons"==options.key&&output instanceof Array)for(i=0;i<output.length;i++)r=output[i],r.icon.path.match(/^[A-Z_]+$/)&&(r.icon.path=google.maps.SymbolPath[r.icon.path]);if("icon"==options.key&&output instanceof Object){(""+output.path).match(/^[A-Z_]+$/)&&(output.path=google.maps.SymbolPath[output.path]);for(n in output)t=output[n],"anchor"==n||"origin"==n||"labelOrigin"==n?output[n]=new google.maps.Point(t[0],t[1]):("size"==n||"scaledSize"==n)&&(output[n]=new google.maps.Size(t[0],t[1]))}return output},a=function(n){var r=[],t,i;if(!n.noWatcher)for(t in n)i=n[t],i&&i.match(/\{\{.*\}\}/)&&r.push(f(t));return r},v=function(n){var i={};for(var t in n)t.match(/^\$/)||t.match(/^ng[A-Z]/)||(i[t]=n[t]);return i},s=function(n,t){var r,i;t=t||{};r={};for(i in n)if(n[i]||0===n[i]){if(i.match(/^on[A-Z]/))continue;if(i.match(/ControlOptions$/))continue;r[i]="string"!=typeof n[i]?n[i]:t.doNotConverStringToNumber&&n[i].match(/^[0-9]+$/)?n[i]:o(n[i],{key:i,scope:t.scope})}return r},y=function(i,r){var e={},s=function(n){return"_"+n.toLowerCase()},h=function(r){var u=r.match(/([^\(]+)\(([^\)]*)\)/),f=u[1],e=u[2].replace(/event[ ,]*/,""),o=n("["+e+"]");return function(n){function u(n,t){return n[t]}var e=o(i),r=f.split(".").reduce(u,i);r&&r.apply(this,[n].concat(e));t(function(){i.$apply()})}},f,u,o;for(f in r)if(r[f]){if(!f.match(/^on[A-Z]/))continue;u=f.replace(/^on/,"");u=u.charAt(0).toLowerCase()+u.slice(1);u=u.replace(/([A-Z])/g,s);o=r[f];e[u]=new h(o)}return e},p=function(n){var e={},r,o,f,u,i,t,s,h;if("object"!=typeof n)return!1;for(r in n)if(n[r]){if(!r.match(/(.*)ControlOptions$/))continue;o=n[r];f=o.replace(/'/g,'"');f=f.replace(/([^"]+)|("[^"]+")/g,function(n,t,i){return t?t.replace(/([a-zA-Z0-9]+?):/g,'"$1":'):i});try{u=JSON.parse(f);for(i in u)u[i]&&(t=u[i],("string"==typeof t?t=t.toUpperCase():"mapTypeIds"===i&&(t=t.map(function(n){return n.match(/^[A-Z]+$/)?google.maps.MapTypeId[n.toUpperCase()]:n})),"style"===i)?(s=r.charAt(0).toUpperCase()+r.slice(1),h=s.replace(/Options$/,"")+"Style",u[i]=google.maps[h][t]):u[i]="position"===i?google.maps.ControlPosition[t]:t);e[r]=u}catch(c){}}return e};return{filter:v,getOptions:s,getEvents:y,getControlOptions:p,toOptionValue:o,getAttrsToObserve:a,orgAttributes:h}};n.$inject=["$parse","$timeout","$log","NavigatorGeolocation","GeoCoder","camelCaseFilter","jsonizeFilter"];angular.module("ngMap").service("Attr2MapOptions",n)}(),function(){"use strict";var n,i=function(t){var i=n.defer(),r=new google.maps.Geocoder;return r.geocode(t,function(n,t){t==google.maps.GeocoderStatus.OK?i.resolve(n):i.reject(t)}),i.promise},t=function(t){return n=t,{geocode:i}};t.$inject=["$q"];angular.module("ngMap").service("GeoCoder",t)}(),function(){"use strict";var n,i=function(t){var i=n.defer();return navigator.geolocation?(void 0===t?t={timeout:5e3}:void 0===t.timeout&&(t.timeout=5e3),navigator.geolocation.getCurrentPosition(function(n){i.resolve(n)},function(n){i.reject(n)},t)):i.reject("Browser Geolocation service failed."),i.promise},t=function(t){return n=t,{getCurrentPosition:i}};t.$inject=["$q"];angular.module("ngMap").service("NavigatorGeolocation",t)}(),function(){"use strict";var t,i,r,n=[],f=function(r){var u=i.createElement("div"),f;return u.style.width="100%",u.style.height="100%",r.appendChild(u),f=new t.google.maps.Map(u,{}),n.push(f),f},e=function(t){for(var u,r,f,i=0;i<n.length;i++)if(r=n[i],!r.inUse){f=r.getDiv();t.appendChild(f);u=r;break}return u},o=function(n){var t=e(n);return t?r(function(){google.maps.event.trigger(t,"idle")},100):t=f(n),t.inUse=!0,t},s=function(n){n.inUse=!1},h=function(){for(var t=0;t<n.length;t++)n[t]=null;n=[]},u=function(u,f,e){return i=u[0],t=f,r=e,{mapInstances:n,resetMapInstances:h,getMapInstance:o,returnMapInstance:s}};u.$inject=["$document","$window","$timeout"];angular.module("ngMap").factory("NgMapPool",u)}(),function(){"use strict";var t,r,i,u,f,e,o,n={},s=function(n,i){var u;return n.currentStyle?u=n.currentStyle[i]:t.getComputedStyle&&(u=r.defaultView.getComputedStyle(n,null).getPropertyValue(i)),u},c=function(t){var i=n[t||0];if(!(i.map instanceof google.maps.Map))return(i.initializeMap(),i.map)},l=function(r){function f(i){n[e]?u.resolve(n[e].map):i>o?u.reject("could not find map"):t.setTimeout(function(){f(i+100)},100)}r=r||{};var u=i.defer(),e=r.id||0,o=r.timeout||2e3;return f(0),u.promise},a=function(t){if(t.map){var i=Object.keys(n).length;n[t.map.id||i]=t}},v=function(t){var r=Object.keys(n).length-1,u=t.map.id||r,i;if(t.map){for(i in t.mapEvents)google.maps.event.clearListeners(t.map,i);t.map.controls&&t.map.controls.forEach(function(n){n.clear()})}t.map.heatmapLayers&&Object.keys(t.map.heatmapLayers).forEach(function(n){t.deleteObject("heatmapLayers",t.map.heatmapLayers[n])});delete n[u]},h=function(n,t){var r=i.defer();return!n||n.match(/^current/i)?u.getCurrentPosition(t).then(function(n){var t=n.coords.latitude,i=n.coords.longitude,u=new google.maps.LatLng(t,i);r.resolve(u)},function(n){r.reject(n)}):e.geocode({address:n}).then(function(n){r.resolve(n[0].geometry.location)},function(n){r.reject(n)}),r.promise},y=function(n,t){return function(i){if(i){var r=o("set-"+n),u=f.toOptionValue(i,{key:n});t[r]&&(n.match(/center|position/)&&"string"==typeof u?h(u).then(function(n){t[r](n)}):t[r](u))}}},p=function(n){var t=n.getAttribute("default-style");"true"==t?(n.style.display="block",n.style.height="300px"):("block"!=s(n,"display")&&(n.style.display="block"),s(n,"height").match(/^(0|auto)/)&&(n.style.height="300px"))};angular.module("ngMap").provider("NgMap",function(){var s={},n;this.setDefaultOptions=function(n){s=n};n=function(n,w,b,k,d,g,nt){return t=n,r=w[0],i=b,u=k,f=d,e=g,o=nt,{defaultOptions:s,addMap:a,deleteMap:v,getMap:l,initMap:c,setStyle:p,getGeoLocation:h,observeAndSet:y}};n.$inject=["$window","$document","$q","NavigatorGeolocation","Attr2MapOptions","GeoCoder","camelCaseFilter"];this.$get=n})}(),function(){"use strict";var n,i=function(t,i){i=i||t.getCenter();var r=n.defer(),u=new google.maps.StreetViewService;return u.getPanoramaByLocation(i||t.getCenter,100,function(n,t){t===google.maps.StreetViewStatus.OK?r.resolve(n.location.pano):r.resolve(!1)}),r.promise},r=function(n,t){var i=new google.maps.StreetViewPanorama(n.getDiv(),{enableCloseButton:!0});i.setPano(t)},t=function(t){return n=t,{getPanorama:i,setPanorama:r}};t.$inject=["$q"];angular.module("ngMap").service("StreetView",t)}();
//# sourceMappingURL=ng-map.min.js.map
